# 软件体系结构文档

## 文档修改历史

| 修改人员 | 日期 | 修改原因 | 版本号 |
| :------: | ---- | -------- | ------ |
|  刘佳月、沈祎辰、王雨晨、殷德林 | 2020.4.23 | 添加迭代一、二部分 | V1.0.0 |
|  王雨晨 | 2020.4.24 | 处理用户界面层分解排版问题 | V1.0.1 |
| 殷德林 | 2020.4.25 | 更改信息视角中的类型 | V1.0.2 |


## 目录

<!-- TOC -->

- [软件体系结构文档](#软件体系结构文档)
    - [文档修改历史](#文档修改历史)
    - [目录](#目录)
    - [1. 引言](#1-引言)
        - [1.1 编制目的](#11-编制目的)
        - [1.2 参考资料](#12-参考资料)
    - [2. 产品概述](#2-产品概述)
    - [3. 逻辑视图](#3-逻辑视图)
    - [4. 组合视图](#4-组合视图)
        - [4.1 开发包图](#41-开发包图)
        - [4.2 运行时进程](#42-运行时进程)
        - [4.3 物理部署](#43-物理部署)
    - [5. 架构设计](#5-架构设计)
        - [5.1 模块职责](#51-模块职责)
        - [5.2 用户界面层分解](#52-用户界面层分解)
            - [5.2.1 职责](#521-职责)
            - [5.2.2 接口规范](#522-接口规范)
                - [5.2.2.1 userui模块](#5221-userui模块)
                - [5.2.2.2 hotelui模块](#5222-hotelui模块)
                - [5.2.2.3 hotelmanagerui模块](#5223-hotelmanagerui模块)
                - [5.2.2.4 adminui模块](#5224-adminui模块)
                - [5.2.2.5 couponui模块](#5225-couponui模块)
                - [5.2.2.6 orderui模块](#5226-orderui模块)
                - [5.2.2.7 tagui模块](#5227-tagui模块)
                - [5.2.2.8 chatMessageui模块](#5228-chatmessageui模块)
                - [5.2.2.9 creditui模块](#5229-creditui模块)
        - [5.3 业务逻辑层分解](#53-业务逻辑层分解)
            - [5.3.1 职责](#531-职责)
            - [5.3.2 接口规范](#532-接口规范)
                - [5.3.2.1 AdminServiceImpl](#5321-adminserviceimpl)
                - [5.3.2.2 TagServiceImpl](#5322-tagserviceimpl)
                - [5.3.2.3 CommentServiceImpl](#5323-commentserviceimpl)
                - [5.3.2.4 HotelServiceImpl](#5324-hotelserviceimpl)
                - [5.3.2.5 RoomServiceImpl](#5325-roomserviceimpl)
                - [5.3.2.6 CouponServiceImpl](#5326-couponserviceimpl)
                - [5.3.2.7 TargetMoneyCouponStrategyImpl](#5327-targetmoneycouponstrategyimpl)
                - [5.3.2.8 TimeCouponStrategyImpl](#5328-timecouponstrategyimpl)
                - [5.3.2.9 BirthdayCouponStrategyImpl](#5329-birthdaycouponstrategyimpl)
                - [5.3.2.10 FestivalCouponStrategyImpl](#53210-festivalcouponstrategyimpl)
                - [5.3.2.11 RoomNumCouponStrategyImpl](#53211-roomnumcouponstrategyimpl)
                - [5.3.2.12 OrderServiceImpl](#53212-orderserviceimpl)
                - [5.3.2.13 AccountServiceImpl](#53213-accountserviceimpl)
                - [5.3.2.13 MessageServiceImpl](#53213-messageserviceimpl)
                - [5.3.2.14 BroadcastServiceImpl](#53214-broadcastserviceimpl)
                - [5.3.2.15 CreditServiceImpl](#53215-creditserviceimpl)
        - [5.4 数据层分解](#54-数据层分解)
            - [5.4.1 职责](#541-职责)
            - [5.4.2 接口规范](#542-接口规范)
        - [6. 信息视角](#6-信息视角)

<!-- /TOC -->

## 1. 引言

### 1.1 编制目的

本报告详细完成对酒店预订系统的概要设计，达到指导详细设计和开发的目的，同时实现和测试人员及用户的沟通。
本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

### 1.2 参考资料

[1] 骆斌，丁二玉，刘钦 . 软件工程与技术（卷二）: 软件开发的技术基础 [M] . 北京: 机械工业出版社，2012
[2]IEEE标准

## 2. 产品概述

参考酒店预订系统用例文档和软件需求规格说明中对产品的概括描述

## 3. 逻辑视图

互联网酒店预订系统中，选择了分层体系结构风格，将系统分为3层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI页面的实现和用户行为的响应，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层结构的设计方案和逻辑设计方案如图所示。

<img src="https://supernatural.oss-cn-beijing.aliyuncs.com/设计方案.png" style="zoom:50%;" />

概要功能：

![](https://supernatural.oss-cn-beijing.aliyuncs.com/[体系结构]逻辑设计方案.png)


## 4. 组合视图

### 4.1 开发包图

|      开发包      | 依赖的其他开发包                                |
| :--------------: | ----------------------------------------------- |
|      mainui      | views, store, api, router, vo,controller        |
|     adminbl      | po, vo                                          |
|     couponbl     | po, vo                                          |
|     creditbl      | po, vo, util                                   |
|  curRoombl | po|
|     hotelbl      | po, vo, util                                    |
| messagebl | po,vo |
|     orderbl      | po, vo,util                                      |
|      userbl      | po, vo                                          |
|   adminblImpl    | po, vo, adminbl,hotelbl,hoteldata,userdata, admindata, enums,util               |
|   couponblImpl   | po, vo, couponbl,userbl, coupondata                    |
| creditblImpl | creditbl,po,vo,creditdata,orderdata,util |
| curRoomblImpl | curRoombl,curRoomdata,po |
|   hotelblImpl    | po, vo, hotelbl, userbl,couponbl,orderbl, hoteldata, util, enums |
| messageblImpl | messagebl, messagedata,userdata,po,vo,util |
|   orderblImpl    | hotelbl, orderbl, userbl, orderdata,creditbl,curRoomdata,hoteldata,userdata,po,vo             |
|    userblImpl    | userbl, userdata, po, vo,creditbl,orderdata                        |
| admincontroller  | adminbl, vo,userbl,                                     |
| couponcontroller | couponbl, vo                                    |
| creditcontroller | creditbl,creditImpl,vo |
| hotelcontroller  | hotelbl,po, vo, util                            |
|messagecontroller | messagebl,vo |
| ordercontroller  | orderbl, vo                                     |
|  usercontroller  | userbl, po, vo,oss,creditbl,enums                                  |
|    admindata     | po,util                                              |
|    coupondata    | po,util   ,annotations                                           |
| creditdata | po,util |
| curRoomdata | po,annotations |
|    hoteldata     | po ,annotations                                         |
| messagedata | po,annotations |
|    orderdata     | po,annotations,util                                              |
|     userdata     | po,annotaions,util                                             |
|        po        | enums ,Timestamp,LocalDateTime,LocalDate                                          |
|        vo        |                       util                          |
|      config      |                                                 |
|      enums       |                                                 |
|       util       |                                                 |

![](https://ydl8023.oss-cn-beijing.aliyuncs.com/包图.png)



### 4.2 运行时进程

- 表示软件在运行时进程间的交互，描述系统的动态结构。
  在酒店预订系统中，会有多个客户端进程和一个服务器进程，其进程图如下图所示。

- 示意图：
  ![](https://supernatural.oss-cn-beijing.aliyuncs.com/进程图(1).png)


### 4.3 物理部署

- 处理如何将软件组件映射到硬件基础设施。
  酒店预订系统中，tomcat和MySQL分别使用容器部署在服务器上，部署图如下。

- 示意图

  ![](https://supernatural.oss-cn-beijing.aliyuncs.com/物理部署图(2).png)



## 5. 架构设计

- 描述功能分解和如何在不同的层中安排软件模块
  - 描述架构中的对象，包含架构图
  - 描述组件接口信息
    - 包括：语法、前置条件、后置条件

### 5.1 模块职责

- 各层职责

|     层     | 职责                                         |
| :--------: | -------------------------------------------- |
| 用户界面层 | 基于窗口的酒店预订系统的用户界面             |
| 业务逻辑层 | 对于用户界面的输入进行响应并进行业务处理逻辑 |
|   数据层   | 负责数据的持久化及数据访问接口               |

- 层之间调用接口
  每一层只是使用下方直接接触的层。层与层之间仅仅是通过接口的调用来完成的。层之间调用的接口如下表。

| 接口                                                         | 服务调用方 | 服务提供方 |
| ------------------------------------------------------------ | ---------- | ---------- |
| AdminService<br />CouponMatchStrategyService<br />CouponService<br />CreditService<br />DefaultCreditUpdateService<br />CurRoomService<br />CommentService<br />HotelService<br />RoomService<br />TagService<br />BroadCastService<br />MessageService<br />OrderService<br />AccountService | 展示层     | 业务逻辑层 |
| AdminMapper<br />CouponMapper<br />CreditMapper<br />CurRoomMapper<br />CommentMapper<br />HotelMapper<br />MyTagMapper<br />RoomMapper<br />BroadCastMapper<br />MessageMapper <br />OrderMapper<br />AccountMapper<br />MemberMapper| 业务逻辑层 | 数据层     |

借用预订用例来说明层之间的调用，如下图所示。每一层之间都是由上层依赖了一个需接口，而下层实现这个供接口。OrderService提供了预订所需要的所有业务逻辑功能，OrderMapper提供了对数据库的增删改查等操作。这样的实现就大大降低了层与层之间的耦合。

![](https://supernatural.oss-cn-beijing.aliyuncs.com/预订用例层之间调用的接口(1).png)

### 5.2 用户界面层分解

根据需求，系统存在18个用户界面：登陆界面、注册界面、客户主界面、酒店管理人员主界面、网站营销人员主界面、网站管理员主界面、个人中心界面、酒店信息界面、客户信息界面、客户订单界面、酒店房间信息界面、酒店详情界面、酒店信息管理界面、订单管理界面、添加优惠策略界面、录入可用房间界面、用户管理界面、酒店管理界面。界面跳转如图所示。

![](https://supernatural.oss-cn-beijing.aliyuncs.com/界面跳转2.png)

#### 5.2.1 职责

|  模块   | 职责                 |
| :-----: | -------------------- |
| userui  | 用户界面，负责展示或更新用户信息             |
| hotelui | 酒店界面，负责展示或更新酒店信息 |
| hotelManagerui | 酒店管理人员操作界面 |
| adminui | 网站管理员操作界面 |
| couponui | 展示或更新优惠策略 |
| orderui | 展示或更新订单信息 |
| tagui | 展示或更新酒店服务标签 |
| chatMessageui | 展示或更新聊天信息 |
| creditui | 展示或更新信用值信息 |

#### 5.2.2 接口规范

##### 5.2.2.1 userui模块

userui模块接口规范如下：

<table>
		<td rowspan="30" style="valign='middle';"><center>userui</center></td>
    <tr>
        <td>语法</td>
        <td>loginAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>尚未登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>用户登录</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>registerAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户尚未注册</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>用户注册</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getUserInfoAPI(id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据id获取用户信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回用户信息</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>updateUserInfoAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新用户信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新用户信息，并返回更新是否成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getMemInfoAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取会员信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回会员信息</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>registerMemInfoAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户尚未注册会员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>用户注册为会员</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>increaseMemberPoints(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要增加会员积分点</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>对应id的会员积分点增加</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>decreaseMemberPointsAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要减少会员积分点</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>对应id的会员积分点减少</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>uploadAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户需要修改头像</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>对应id的用户头像更新</td>
    </tr>
</table>

userui模块需要的服务接口如下：

|                 服务名                 |            服务            |
| :------------------------------------: | :------------------------: |
|     AccountController.getUserInfo      |        获取用户信息        |
|      AccountController.updateInfo      |        更新用户信息        |
|        AccountController.login         |          用户登录          |
|   AccountController.registerAccount    |          用户注册          |
|     AccountController.registerMem      |      用户注册成为会员      |
|      AccountController.getMemInfo      | 取得对应id的用户的会员信息 |
| AccountController.increaseMemberPoints |      增加会员积分点数      |
| AccountController.decreaseMemberPoints |      减少会员积分点数      |
|     AccountController.uploadImage      |        上传用户头像        |

##### 5.2.2.2 hotelui模块

hotelui模块接口规范如下：

<table>
		<td rowspan="100" style="valign='middle';"><center>hotelui</center></td>
    <tr>
        <td>语法</td>
        <td>getHotelsAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取酒店信息列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店信息列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getHotelByIdAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取某用户预订过的酒店</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回指定酒店信息</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getAllHotelsLJYAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取所有酒店信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店信息列表</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getHotelByIdLJYAPI(hotelId)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据HotelId获取酒店信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店信息</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getHotelByDateAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据日期获取酒店信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店信息</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>addHotelAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getManagerIdByHotelIdAPI(hotelId)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要通过酒店id得到该酒店工作人员的id</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得酒店工作人员id</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getHotelIdByManagerIdAPI(managerId)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要通过酒店工作人员的id获得他所工作酒店的id</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得酒店id</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>updateHotelInfoAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新酒店信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>酒店信息更新</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>addHotelCommentAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要增加酒店评价</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加酒店评价</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getCommentByHotelIdAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取某酒店的所有评价</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得所有评价</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>updateReplyAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新酒店评价</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新评价的回复</td>
    </tr>
</table>


hotelui模块需要的服务接口如下：

|            服务名             |     服务     |
| :---------------------------: | :----------: |
|      HotelController.retrieveAllHotels      |      获取酒店信息列表      |
|      HotelController.retrieveHotelDetail      |      获取酒店详细信息   |
|      HotelController.createHotel      |      创建酒店   |
|      HotelController.getOrderByHotelId      |      获取某酒店的所有订单   |
|      HotelController.getAllHotels      |      获取所有酒店信息  |
|      HotelController.createComment      |      创建酒店评价  |
|      HotelController.getCommentByHotelId      |      获得某酒店的所有评价  |
|      HotelController.updateReply      |      酒店管理员回复评价  |
|      HotelController.addRoomInfo      |      录入酒店房间  |
|      HotelController.getCurrentHotelInfo      |      获得当前酒店信息  |
|      HotelController.retrieveAllHotelsInDateRange      |      检索在时间范围内的酒店  |
|      HotelController.getManagerId      |      获得酒店管理员的id  |
|      HotelController.getHotelId      |     获得酒店的id |
|      HotelController.updateInfo      |    更新酒店信息 |
|      HotelController.updateRoom      |    更新房间信息 |
|      HotelController.changePic      |    更改酒店图片信息 |
|      HotelController.uploadImage      |    上传图片 |
|      HotelController.getPics      |    获取酒店图片 |

##### 5.2.2.3 hotelmanagerui模块

hotelmanagerui模块接口规范如下：

<table>
		<td rowspan="10" style="valign='middle';"><center>hotelmanagerui</center></td>
    <tr>
        <td>语法</td>
        <td>addRoomAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要增加酒店房间信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加酒店房间</td>
    </tr>
</table>


hotelmanagerui模块需要的服务接口如下：

|            服务名             |     服务     |
| :---------------------------: | :----------: |
|       HotelController.addRoomInfo       |       更新酒店房间信息       |

##### 5.2.2.4 adminui模块

adminui模块接口规范如下：

<table>
		<td rowspan="28" style="valign='middle';"><center>adminui</center></td>
    <tr>
    	<td>语法</td>
        <td>getClientListAPI()</td>
    </tr>
    <tr>
    	<td>前置条件</td></td>
        <td>网站管理员需要获得所有客户信息</td>
    </tr>
	<tr>
		<td>后置条件</td>
        <td>显示所有客户信息</td>
	</tr>
	<tr>
    	<td>语法</td>
        <td>getManagerListAPI()</td>
    </tr>
    <tr>
    	<td>前置条件</td></td>
        <td>网站管理员需要获得所有酒店工作人员信息</td>
    </tr>
	<tr>
		<td>后置条件</td>
        <td>显示所有酒店工作人员信息</td>
	</tr>
	<tr>
    	<td>语法</td>
        <td>getOperatorListAPI()</td>
    </tr>
    <tr>
    	<td>前置条件</td></td>
        <td>网站管理员需要获得所有网站运营人员信息</td>
    </tr>
	<tr>
		<td>后置条件</td>
        <td>显示所有网站运营人员信息</td>
	</tr>
    <tr>
        <td>语法</td>
        <td>addManagerAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店工作人员账号</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店工作人员账号，并返回添加是否成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>addOperatorAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加网站运营人员账号</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加网站运营人员账号，并返回添加是否成功</td>
    </tr>
	 <tr>
        <td>语法</td>
        <td>deleteUserAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除客户账号</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除客户账号，并返回删除是否成功</td>
    </tr>
	 <tr>
        <td>语法</td>
        <td>deleteHMAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除酒店及其工作人员账号</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除酒店及其工作人员账号，并返回删除是否成功</td>
    </tr>
	<tr>
        <td>语法</td>
        <td>updateTmpUserInfoAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更改客户、酒店工作人员、网站运营人员信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示是否更新成功，并显示用户信息</td>
    </tr>
	<tr>
        <td>语法</td>
        <td>getCurveDatasetAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要显示网站使用人数变化图表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示网站使用人数变化图表</td>
    </tr>
</table>



adminui模块需要的服务接口如下：

|              服务名               |                   服务                   |
| :-------------------------------: | :--------------------------------------: |
|    AdminController.addManager     |           添加酒店工作人员账号           |
|    AdminController.addOperator    |           添加网站运营人员账号           |
|  AdminController.getAllManagers   |         获得所有酒店管理人员信息         |
|   AdminController.getAllClients   |             获得所有客户信息             |
|  AdminController.getAllOperators  |         获得所有网站运营人员信息         |
|    AdminController.deleteUser     |                 删除客户                 |
|     AdminController.deleteHM      |            删除酒店及工作人员            |
| AdminController.updateTmpUserInfo | 更改客户、酒店工作人员、网站营销人员信息 |
|  AdminController.getCurveDataSet  |         获取网站用户人数变化曲线         |



##### 5.2.2.5 couponui模块

couponui模块接口规范如下：

<table>
		<td rowspan="30" style="valign='middle';"><center>couponui</center></td>
    <tr>
        <td>语法</td>
        <td>hotelTargetMoneyAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店满减优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店满减优惠策略并返回</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>hotelTimeAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店限时优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店限时优惠策略并返回</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>hotelTargetRoomNumAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店多间优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店多间优惠策略并返回</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>hotelBirthdayAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店生日优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店生日优惠策略并返回</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>hotelFestivalAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店节日优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店节日优惠策略并返回</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>hotelAllCouponsAPI(hotelId)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要查看指定酒店提供的所有优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回指定酒店提供的所有优惠策略</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>orderMatchCouponsAPI(params)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取指定订单可用的优惠策略列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回指定订单可用的优惠策略列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>deleteCouponAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除酒店优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除酒店优惠策略并返回</td>
    </tr>
</table>

couponui模块需要的服务接口如下：

|                    服务名                    |              服务              |
| :------------------------------------------: | :----------------------------: |
|  CouponController.addHotelTargetMoneyCoupon  |      添加酒店满减优惠策略      |
|     CouponController.getHotelAllCoupons      | 查看某个酒店提供的所有优惠策略 |
|    CouponController.getOrderMatchCoupons     | 获取指定订单可用的优惠策略列表 |
|        CouponController.deleteCoupon         |        删除酒店优惠策略        |
|     CouponController.addHotelTimeCoupon      |      添加酒店限时优惠策略      |
| CouponController.addHotelTargetRoomNumCoupon |      添加酒店多间优惠策略      |
|   CouponController.addHotelBirthdayCoupon    |      添加酒店生日优惠策略      |
|   CouponController.addHotelFestivalCoupon    |      添加酒店节日优惠策略      |

##### 5.2.2.6 orderui模块

orderui模块接口规范如下：

<table>
		<td rowspan="22" style="valign='middle';"><center>orderui</center></td>
    <tr>
        <td>语法</td>
        <td>getAllOrdersAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获得所有订单信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有订单信息</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getUserOrdersAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获得指定用户的所有订单信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回指定用户的所有订单信息</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>cancelOrderAPI(orderId)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要撤销订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>撤销订单并返回撤销是否成功</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>reserveHotelAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要预定酒店</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>成功预定酒店</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getOrderByHotelIdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据hotelId获取对应酒店的订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回对应酒店的所有订单</td>
    </tr>
  <tr>
        <td>语法</td>
        <td>getOrderAPI(orderid)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据oderId获取对应订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回对应的订单</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>changeStatusAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要改变oderId订单的状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更改状态</td>
    </tr>
</table>


orderui模块需要的服务接口如下：

|            服务名             |     服务     |
| :---------------------------: | :----------: |
|       OrderController.retrieveAllOrders       |       获得所有订单信息       |
|       OrderController.retrieveUserOrders       |       获得指定用户的所有订单信息       |
|       OrderController.annulOrder       |       撤销订单       |
|       OrderController.reserveHotel       |       预定订单       |
|       OrderController.getOrderByHotelId       |       获取hotelId的所有订单       |
|       OrderController.changeStatus       |       更改订单状态       |
|       OrderController.retrieveOrder       |       检索订单    |
|       OrderController.retrieveHotelOrders       |       获取酒店所有订单    |

##### 5.2.2.7 tagui模块

tagui模块接口规范如下：

<table>
		<td rowspan="10" style="valign='middle';"><center>hotelui</center></td>
    <tr>
        <td>语法</td>
        <td>getAllTagsAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取该酒店所有服务标签</td>
    </tr>
    <tr>
        <td>后置条件</td>
       <td>返回酒店服务标签列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>addTagAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店服务标签</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加标签，显示是否添加成功，并显示所有服务标签</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>deleteTagAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除酒店服务标签</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除标签，显示是否删除成功，并显示剩余所有服务标签</td>
    </tr>
</table>


tagui模块需要的服务接口如下：

|          服务名          |         服务         |
| :----------------------: | :------------------: |
|    TagController.list    | 获取酒店服务标签列表 |
|    TagController.save    |   添加一条服务标签   |
| TagController.deleteById |   删除某条服务标签   |

##### 5.2.2.8 chatMessageui模块

chatMessage模块接口规范如下：

<table>
		<td rowspan="80" style="valign='middle';"><center>chatMessageui</center></td>
    <tr>
        <td>语法</td>
        <td>sendMessageAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要发送消息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否发送成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getQuesByIdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据网站运营人员id获取收到的留言列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回留言列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getChatByIdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据留言id获取聊天内容列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回聊天内容列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getQuesForClientByIdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据客户id获取已发送的留言列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回已发送的留言列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getPrivateAdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据客户id获取收到的推送内容列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回收到的推送内容列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getAdSentByIdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据网站运营人员id获取已发送的推送列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回已发送的推送列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>changeMessageStatusAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据消息id更新消息状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getBroadcastListAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取网站公告列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回网站公告列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>sendBroadcastAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加网站公告</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否添加成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>changeBroadcastStatusAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据网站公告id更新公告状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>updatePriorityAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据网站公告id更新网站公告优先级</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
</table>

chatMessageui模块需要的服务接口如下：

|            服务名             |     服务     |
| :---------------------------: | :----------: |
|       MessageController.getQuesById      |      根据网站运营人员id获取收到的留言列表      |
|       MessageController.getQuesForClientById       |      根据客户id获取已发送的留言列表      |
|       MessageController.getChatById      |      根据留言id获取聊天内容列表      |
|       MessageController.getPrivateAd       |      根据客户id获取收到的推送内容列表      |
|       MessageController.getAdSentById      |      根据网站运营人员id获取已发送的推送列表      |
|       MessageController.sendMessage       |      发送消息      |
|       MessageController.changeMessageStatus      |      根据消息id更新消息状态      |
|       MessageController.getBroadcastList       |      获取网站公告列表      |
|       MessageController.sendBroadcast      |      添加网站公告      |
|       MessageController.changeBroadcastStatus       |      根据网站公告id更新公告状态      |
|       MessageController.updatePriority      |      根据网站公告id更新网站公告优先级      |


##### 5.2.2.9 creditui模块

creditui模块接口规范如下：

<table>
		<td rowspan="80" style="valign='middle';"><center>creditui</center></td>
    <tr>
        <td>语法</td>
        <td>updateCreditAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新客户信用值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getCreditRecordsAPI()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取信用变更记录列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回信用变更记录列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getUserCreditAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据客户id获取信用值变更记录列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回客户信用值变更记录列表</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>getCreditByIdAPI(data)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据客户id获取当前信用值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回当前信用值</td>
    </tr>
    <tr>
        <td>语法</td>
        <td>cancelUpdateAPI(param)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据信用变更记录id撤销变更</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否撤销成功</td>
    </tr>
</table>

creditui模块需要的服务接口如下：

|            服务名             |     服务     |
| :---------------------------: | :----------: |
|       CreditController.getCreditById      |      根据客户id获取当前信用值      |
|       CreditController.decrementDefault       |      采用系统默认方式更新信用值      |
|       CreditController.manualUpdate      |      采用手动方式更新信用值      |
|       CreditController.getCreditRecords       |      获取信用变更记录列表      |
|       CreditController.getUserCredit      |      根据客户id获取信用变更记录列表      |
|       CreditController.cancelUpdate       |      撤销信用变更      |



### 5.3 业务逻辑层分解

业务逻辑层包括多个针对界面的业务逻辑处理对象。例如，User对象负责处理登录界面的业务逻辑，Coupon对象负责优惠券界面的业务逻辑。业务逻辑层的设计如下图所示。

![](https://supernatural.oss-cn-beijing.aliyuncs.com/bl.png)

#### 5.3.1 职责

| 模块     | 职责                                       |
| -------- | ------------------------------------------ |
| adminbl  | 负责实现对应于网站管理人员管理界面所需服务 |
| couponbl | 负责实现优惠券界面所需的服务               |
| hotelbl  | 负责实现酒店管理界面所需的服务             |
| orderbl  | 负责实现预订、订单界面所需的服务           |
| userbl   | 负责实现对应于用户登录界面的业务逻辑       |



#### 5.3.2 接口规范

##### 5.3.2.1 AdminServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.addManager</center></td>
        <td>语法</td>
        <td>public ResponseVO addManager(HotelManagerVO vo);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加一个酒店经理</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加一个酒店经理</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.addOperator</center></td>
        <td>语法</td>
        <td>public ResponseVO addOperator(UserForm userForm);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加一个运营人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加一个运营人员</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.getAllManagers</center></td>
        <td>语法</td>
        <td>public List<User> getAllManagers();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要得到所有经理的信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有经理信息的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.getAllClients</center></td>
        <td>语法</td>
        <td>public List<User> getAllClients();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要得到所有客户的信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有客户的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.getAllOperators</center></td>
        <td>语法</td>
        <td>public List<User> getAllOperators();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要得到所有运营人员的信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有运营人员的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.deleteHM</center></td>
        <td>语法</td>
        <td>public ResponseVO deleteHM(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除酒店及工作人员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除酒店及工作人员</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AdminServiceImpl.getCurveDataSet</center></td>
        <td>语法</td>
        <td>public AdminCurveVO getCurveDataSet();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要绘制推广度曲线</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得推广度曲线所需的datasets</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>User.setEmail(String email)</td>
        <td colspan="2">设置用户的email</td>
    </tr>
    <tr>
        <td>User.setPassword(String pwd)</td>
        <td colspan="2">设置用户密码</td>
    </tr>
    <tr>
        <td>User.setUserType(UserType usertype)</td>
        <td colspan="2">设置用户类型</td>
    </tr>
    <tr>
        <td>User.setUserName(String userName)</td>
        <td colspan="2">设置用户名</td>
    </tr>
     <tr>
    	<td>User.getCreateTime()</td>
        <td colspan="2">获取用户创建时间</td>  
    </tr>
    <tr>
        <td>AdminMapper.addManager(User user)</td>
        <td colspan="2">在sql数据库中添加经理</td>
    </tr>
    <tr>
        <td>AdminMapper.addOperator(User user)</td>
        <td colspan="2">在sql数据库中添加运营人员</td>
    </tr>
    <tr>
        <td>AdminMapper.getAllManagers()</td>
        <td colspan="2">获取全部经理</td>
    </tr>
    <tr>
        <td>AdminMapper.getAllClients()</td>
        <td colspan="2">获取全部客户</td>
    </tr>
    <tr>
        <td>AdminMapper.getAllOperators()</td>
        <td colspan="2">获取全部运营人员</td>
    </tr>
    <tr>
    	<td>AccountMapper.deleteUser(Integer userId)</td>
        <td colspan="2">删除用户</td>
    </tr>
    <tr>
    	<td>HotelMapper.selectById(Integer hotelId)</td>
        <td colspan="2">获取酒店</td>
    </tr>
    <tr>
    	<td>HotelMapper.delete(Integer hotelId)</td>
        <td colspan="2">删除酒店</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败的信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功的信息</td>
    </tr>
</table>



##### 5.3.2.2 TagServiceImpl

<table>
    <tr>
    	<td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
    	<td rowspan="3"><center>TagServiceImpl.getTagsByHotelId</center></td>
   		<td>语法</td>
        <td>public List<MyTag> getTagsByHotelId(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取酒店服务标签</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获取酒店服务标签</td>
    </tr>
    <tr>
    	<td rowspan="3"><center>TagServiceImpl.save</center></td>
   		<td>语法</td>
        <td>public ResponseVO save(String tagName,Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店服务标签</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店服务标签</td>
    </tr>
    <tr>
    	<td rowspan="3"><center>TagServiceImpl.deleteById</center></td>
   		<td>语法</td>
        <td>public ResponseVO deleteById(Integer id);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除酒店服务标签</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除酒店服务标签</td>
    </tr>
    <tr>
    	<td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
    	<td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
    	<td>MyTagMapper.getTagsByHotelId(int hotelId);</center></td>
        <td colspan="2">获取酒店全部标签</center></td>
    </tr>
    <tr>
    	<td>MyTagMapper.deleteById(int id)</center></td>
        <td colspan="2">删除标签</center></td>
    </tr>
    <tr>
    	<td>MyTagMapper.selectByHotelIdAndTagName(String tagName,int hotelId)</center></td>
        <td colspan="2">根据标签名与酒店编号获取标签列表</center></td>
    </tr>
    <tr>
    	<td>MyTagMapper.insert(Tag tag)</center></td>
        <td colspan="2">向数据库添加标签</center></td>
    </tr>
    <tr>
    	<td>MyTag.setHotelId(int id)</td>
        <td colspan="2">设置标签所属标签</center></td>
    </tr>
    <tr>
    	<td>MyTag.setTagName(String tagName)</td>
        <td colspan="2">设置标签名称</center></td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败的信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功的信息</td>
    </tr>
</table>

##### 5.3.2.3 CommentServiceImpl

<table>
    <tr>
    	<td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>CommentServiceImpl.addComment</center></td>
        <td>语法</td>
        <td>public ResponseVO addComment(CommentVO commentVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加一条评论</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加一条评论</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CommentServiceImpl.getCommentByHotelId</center></td>
        <td>语法</td>
        <td>public List<Comment> getCommentByHotelId(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取酒店的全部评论</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获取酒店的评论列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CommentServiceImpl.updateReply</center></td>
        <td>语法</td>
        <td>public ResponseVO updateReply(int commentId,String reply);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新回复</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新回复</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>CommentMapper.addComment(Comment comment)</center></td>
        <td colspan="2">增加评论</center></td>
    </tr>
    <tr>
        <td>CommentMapper.getCommentByHotelId(int hotelId)</center></td>
        <td colspan="2">获取酒店评论</center></td>
    </tr>
    <tr>
        <td>CommentMapper.updateReply(int commentId,String reply)</center></td>
        <td colspan="2">更新评论</center></td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败的信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功的信息</td>
    </tr>
</table>    

##### 5.3.2.4 HotelServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.addHotel</center></td>
        <td>语法</td>
        <td>public void addHotel(HotelVO hotelVO) throws ServiceException;</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加一个酒店</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加一个酒店</td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.updateRoomInfo</center></td>
        <td>语法</td>
        <td>public void updateRoomInfo(Integer hotelId, String roomType, Integer rooms);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>预订完成，需要更新酒店房间的信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新酒店房间的信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.getRoomCurNum</center></td>
        <td>语法</td>
        <td>public int getRoomCurNum(Integer hotelId, String roomType);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要得到酒店目前某类型房间的数量</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回房间数量</td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.retrieveHotels</center></td>
        <td>语法</td>
        <td>public List<HotelVO> retrieveHotels(Integer userid);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取某用户预订过的酒店信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回预订过酒店信息列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.getAllHotels</center></td>
        <td>语法</td>
        <td>public List<HotelVO> getAllHotels();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取酒店信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店信息列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.retrieveHotelDetails</center></td>
        <td>语法</td>
        <td>public HotelVO retrieveHotelDetails(Integer hotelId,Integer userid);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取某用户预订过的某家酒店详细信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回某家酒店详细信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>HotelServiceImpl.getHotelInfo</center></td>
        <td>语法</td>
        <td>public HotelVO retrieveHotelDetails(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取某家酒店详细信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回某家酒店详细信息</td>
    </tr>
    <tr>
    	<td rowspan="3"><center>HotelServiceImpl.retrieveHotelByDate</center></td>
        <td>语法</td>
        <td>public List<HotelVO> retrieveHotelByDate(Integer userid, String checkInDate, String checkOutDate);</td>
    </tr>
    <tr>
    	<td>前置条件</td>
        <td>需要按照日期检索酒店</td>
    </tr>
    <tr>
    	<td>后置条件</td>
        <td>返回按照日期检索酒店结果列表</td>
    </tr>
    <tr>
    	<td rowspan="3"><center>HotelServiceImpl.updateHotelInfo</center></td>
        <td>语法</td>
        <td>public ResponseVO updateHotelInfo(int id, String address, String phoneNum);</td>
    </tr>
    <tr>
    	<td>前置条件</td>
        <td>需要更新酒店信息</td>
    </tr>
    <tr>
    	<td>后置条件</td>
        <td>返回更新酒店信息结果</td>
    </tr>
    <tr>
    	<td rowspan="3"><center>HotelServiceImpl.getHotelId</center></td>
        <td>语法</td>
        <td>public int getHotelId(Integer managerId);</td>
    </tr>
    <tr>
    	<td>前置条件</td>
        <td>需要根据工作人员获得酒店ID</td>
    </tr>
    <tr>
    	<td>后置条件</td>
        <td>获得酒店ID</td>
    </tr>
    <tr>
    	<td rowspan="3"><center>HotelServiceImpl.getManagerId</center></td>
        <td>语法</td>
        <td>public ResponseVO getManagerId(Integer hotelId);</td>
    </tr>
    <tr>
    	<td>前置条件</td>
        <td>需要根据酒店获得工作人员ID</td>
    </tr>
    <tr>
    	<td>后置条件</td>
        <td>获得工作人员ID</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
    	<td>OrderService.hasOrderedBefore(int id)</td>
        <td colspan="2">获取客户是否预订过的信息</td>
    </tr>
    <tr>
    	<td>CouponService.getHotelAllCouponName(int id)</td>
        <td colspan="2">获取某酒店的全部优惠券</td>
    </tr>
    <tr>
        <td>AccountService.getUserInfo(int id)</td>
        <td colspan="2">获取用户个人信息</td>
    </tr>
    <tr>
        <td>User.getUserType()</td>
        <td colspan="2">返回用户类型</td>
    </tr>
    <tr>
        <td>HotelMapper.insertHotel(Hotel hotel)</td>
        <td colspan="2">在数据库中插入酒店</td>
    </tr>
    <tr>
        <td>RoomService.updateRoomInfo(Integer hotelId, String roomType, Integer rooms)</td>
        <td colspan="2">预订酒店后更新客房房间数量</td>
    </tr>
    <tr>
        <td>RoomService.getRoomCurNum(Integer hotelId, String roomType)</td>
        <td colspan="2">获取酒店指定房间剩余数量</td>
    </tr>
    <tr>
        <td>HotelMapper.selectAllHotel()</td>
        <td colspan="2">返回所有酒店列表</td>
    </tr>
    <tr>
        <td>HotelMapper.selectById(Integer hotelId)</td>
        <td colspan="2">根据id返回酒店对象</td>
    </tr>
    <tr>
        <td>RoomService.retrieveHotelRoomInfo(hotelId)</td>
        <td colspan="2">获取某个酒店的全部房间信息</td>
    </tr>
    <tr>
        <td>RoomVO.setId(Integer id)</td>
        <td colspan="2">设置房间id</td>
    </tr>
    <tr>
        <td>RoomVO.setPrice(Double price)</td>
        <td colspan="2">返回房间价格</td>
    </tr>
    <tr>
        <td>RoomVO.setRoomType(String roomType)</td>
        <td colspan="2">返回房间类型</td>
    </tr>
    <tr>
        <td>RoomVO.setCurNum(Integer curNum)</td>
        <td colspan="2">设置当前房间数量</td>
    </tr>
    <tr>
        <td>RoomVO.setTotal(Integer total)</td>
        <td colspan="2">设置房间总数</td>
    </tr>
    <tr>
        <td>Hotel.setAddress(String address)</td>
        <td colspan="2">设置酒店地址</td>
    </tr>
    <tr>
        <td>Hotel.setBizRegion(BizRegion bizRegion)</td>
        <td colspan="2">设置酒店商圈</td>
    </tr>
    <tr>
        <td>Hotel.setRate(Double rate)</td>
        <td colspan="2">设置酒店评分</td>
    </tr>
    <tr>
        <td>Hotel.setManagerId(Integer managerId)</td>
        <td colspan="2">设置酒店经理</td>
    </tr>
    <tr>
        <td>Hotel.setPhoneNum(String phoneNum)</td>
        <td colspan="2">设置酒店电话</td>
    </tr>
    <tr>
        <td>Hotel.setHotelName(String hotelName)</td>
        <td colspan="2">设置酒店名称</td>
    </tr>
    <tr>
        <td>Hotel.setHotelStar(HotelStar hotelStar)</td>
        <td colspan="2">设置酒店星级</td>
    </tr>
    <tr>
        <td>HotelVO.setRooms(List<RoomVO> rooms)</td>
        <td colspan="2">设置酒店房间</td>
    </tr>
    <tr>
        <td>Hotel.setDescription(String description)</td>
        <td colspan="2">设置酒店描述</td>
    </tr>

##### 5.3.2.5 RoomServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>RoomServiceImpl.retrieveHotelRoomInfo</center></td>
        <td>语法</td>
        <td>List<HotelRoom> retrieveHotelRoomInfo(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取某个酒店的全部房间信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回某个酒店的全部房间信息的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>RoomServiceImpl.insertRoomInfo</center></td>
        <td>语法</td>
        <td>void insertRoomInfo(HotelRoom hotelRoom);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店客房信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店客房信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>RoomServiceImpl.updateRoomInfo</center></td>
        <td>语法</td>
        <td>void updateRoomInfo(Integer hotelId, String roomType, Integer rooms);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>预订酒店后，需要更新客房房间数量</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新客房房间数量</td>
    </tr>
    <tr>
        <td rowspan="3"><center>RoomServiceImpl.getRoomCurNum</center></td>
        <td>语法</td>
        <td>int getRoomCurNum(Integer hotelId, String roomType);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取酒店指定房间剩余数量</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店指定房间剩余数量</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>RoomMapper.selectRoomsByHotelId(@Param("hotelId") Integer hotelId)</td>
        <td colspan="2">返回指定id的酒店的全部房间信息列表</td>
    </tr>
    <tr>
        <td>RoomMapper.insertRoom(HotelRoom hotelRoom)</td>
        <td colspan="2">在数据库中插入房间</td>
    </tr>
    <tr>
        <td>RoomMapper.updateRoomInfo(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType,@Param("curNum") Integer curNum)</td>
        <td colspan="2">在数据库中更新房间信息</td>
    </tr>
    <tr>
        <td>RoomMapper.getRoomCurNum(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType)</td>
        <td colspan="2">返回指定酒店的指定类型房间的当前数量</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败的信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功的信息</td>
    </tr>
</table>

##### 5.3.2.6 CouponServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponServiceImpl.CouponServiceImpl</center></td>
        <td>语法</td>
        <td>public CouponServiceImpl(TargetMoneyCouponStrategyImpltargetMoneyCouponStrategy, TimeCouponStrategyImpl timeCouponStrategy, CouponMapper couponMapper);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要创建一个优惠券策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加一个优惠券策略</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponServiceImpl.getMatchOrderCoupon</center></td>
        <td>语法</td>
        <td>public List<Coupon> getMatchOrderCoupon(OrderVO orderVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>订单创建，需要得到该订单可用的所有优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有可用优惠策略的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponServiceImpl.getHotelAllCoupon</center></td>
        <td>语法</td>
        <td>public List<Coupon> getHotelAllCoupon(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要得到指定酒店的所有优惠券信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该酒店所有优惠券信息的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponServiceImpl.getHotelAllCouponName</center></td>
        <td>语法</td>
        <td>public List<String> getHotelAllCouponName(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要得到指定酒店的所有优惠券名称</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该酒店所有优惠券名称的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponVO.addHotelTargetMoneyCoupon</center></td>
        <td>语法</td>
        <td>public CouponVO addHotelTargetMoneyCoupon(HotelTargetMoneyCouponVO couponVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店满减优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店满减优惠策略</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponVO.addHotelTimeCoupon</center></td>
        <td>语法</td>
        <td>public CouponVO addHotelTimeCoupon(TimeCouponVO timeCouponVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店限时优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店限时优惠策略</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponVO.addHotelTargetRoomNumCoupon</center></td>
        <td>语法</td>
        <td>public CouponVO addHotelTargetRoomNumCoupon(HotelTargetRoomNumCouponVO couponVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店多间优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店多间优惠策略</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponVO.addHotelBirthdayCoupon</center></td>
        <td>语法</td>
        <td>public CouponVO addHotelBirthdayCoupon(HotelBirthdayCouponVO couponVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店生日优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店生日优惠策略</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponVO.addHotelFestivalCoupon</center></td>
        <td>语法</td>
        <td>public CouponVO addHotelFestivalCoupon(HotelFestivalCouponVO couponVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加酒店节日优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加酒店节日优惠策略</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CouponVO.deleteCoupon</center></td>
        <td>语法</td>
        <td>public ResponseVO deleteCoupon(int couponId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除酒店优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除酒店优惠策略</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>CouponMatchStrategy.isMatch(OrderVO orderVO, Coupon coupon)</td>
        <td colspan="2">判断订单是否符合某优惠策略</td>
    </tr>
    <tr>
        <td>CouponMapper.selectByHotelId(Integer hotelId)</td>
        <td colspan="2">根据酒店选择优惠策略</td>
    </tr>
    <tr>
        <td>CouponMapper.insertCoupon(Couon coupon)</td>
        <td colspan="2">在数据库中插入优惠券</td>
    </tr>
    <tr>
        <td>Coupon.setCouponName(String couponName)</td>
        <td colspan="2">设置优惠券名称</td>
    </tr>
    <tr>
        <td>CouponVO.setId(int id);</td>
        <td colspan="2">设置优惠券id</td>
    </tr>
    <tr>
        <td>Coupon.setStatus(Integer status)</td>
        <td colspan="2">设置优惠券状态</td>
    </tr>
    <tr>
        <td>Coupon.setDiscountMoney(double discountMoney)</td>
        <td colspan="2">设置优惠券金额</td>
    </tr>
    <tr>
        <td>Coupon.setHotelId(Integer hotelId)</td>
        <td colspan="2">设置推出该优惠券的酒店类型</td>
    </tr>
    <tr>
        <td>Coupon.setTargetMoney(double targetMoney)</td>
        <td colspan="2">设置优惠券的使用门槛</td>
    </tr>
    <tr>
        <td>Coupon.setCouponType(Integer couponType)</td>
        <td colspan="2">设置优惠券类型</td>
    </tr>
    <tr>
        <td>Coupon.setDescription(String description)</td>
        <td colspan="2">设置优惠券描述</td>
    </tr>
    <tr>
        <td>CouponMapper.deleteCoupon(Integer couponId)</td>
        <td colspan="2">删除优惠券</td>
    </tr>
</table>

##### 5.3.2.7 TargetMoneyCouponStrategyImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>TargetMoneyCouponStrategyImpl.isMatch</center></td>
        <td>语法</td>
        <td>public boolean isMatch(OrderVO orderVO, Coupon coupon);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要判断某订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回订单是否可使用该优惠策略</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>Coupon.getCouponType()</td>
        <td colspan="2">返回优惠券类型</td>
    </tr>
    <tr>
        <td>OrderVO.getPrice()</td>
        <td colspan="2">返回订单原价</td>
    </tr>
    <tr>
        <td>Coupon.getTargetMoney()</td>
        <td colspan="2">返回优惠券使用门槛</td>
    </tr>
</table>

##### 5.3.2.8 TimeCouponStrategyImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>TimeCouponStrategyImpl.isMatch</center></td>
        <td>语法</td>
        <td>public boolean isMatch(OrderVO orderVO, Coupon coupon);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要判断某订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td></td>
        <td colspan="2"></td>
    </tr>
</table>

##### 5.3.2.9 BirthdayCouponStrategyImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>BirthdayCouponStrategyImpl.isMatch</center></td>
        <td>语法</td>
        <td>public boolean isMatch(OrderVO orderVO, Coupon coupon);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要判断某订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td>AccountService.getMemInfo(int userId)</td>
        <td colspan="2">返回对应用户id的会员信息</td>
    </tr>
    <tr>
        <td>Coupon.getCouponType()</td>
        <td colspan="2">返回优惠券类型</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="2"></td>
    </tr>
</table>

##### 5.3.2.10 FestivalCouponStrategyImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>FestivalCouponStrategyImpl.isMatch</center></td>
        <td>语法</td>
        <td>public boolean isMatch(OrderVO orderVO, Coupon coupon);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要判断某订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td>OrderVO.getCreateDate()</td>
        <td colspan="2">返回订单创建日期</td>
    </tr>
    <tr>
        <td>Coupon.getCouponType()</td>
        <td colspan="2">返回优惠券类型</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="2"></td>
    </tr>
</table>

##### 5.3.2.11 RoomNumCouponStrategyImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>RoomNumCouponStrategyImpl.isMatch</center></td>
        <td>语法</td>
        <td>public boolean isMatch(OrderVO orderVO, Coupon coupon);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要判断某订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该订单是否可以使用某优惠策略</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td>OrderVO.getRoomNum()</td>
        <td colspan="2">返回对应订单所需房间数</td>
    </tr>
    <tr>
        <td>Coupon.getCouponType()</td>
        <td colspan="2">返回优惠券类型</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="2"></td>
    </tr>
</table>

##### 5.3.2.12 OrderServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getHotelOrders</center></td>
        <td>语法</td>
        <td>public List<Order> getHotelOrders(Integer hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要查看酒店的所有订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回酒店的所有订单的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.addOrder</center></td>
        <td>语法</td>
        <td>ResponseVO addOrder(OrderVO orderVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要预订酒店</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加订单</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getAllOrders</center></td>
        <td>语法</td>
        <td>List<Order> getAllOrders();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获得所有订单信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所有订单信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getUserOrders</center></td>
        <td>语法</td>
        <td>List<Order> getUserOrders(int userid);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获得指定用户的所有订单信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回指定用户的所有订单信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.annulOrder</center></td>
        <td>语法</td>
        <td>ResponseVO annulOrder(int orderid,String reason,int hotelId,String roomType,String startTime,String endTime,int reserveNum);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要撤销订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>订单撤销</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getOrderByHotelId</center></td>
        <td>语法</td>
        <td>public List<Order> getOrderByHotelId(int hotelId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获得某个酒店的所有订单</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回某个酒店的所有订单的列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.hasOrderedBefore</center></td>
        <td>语法</td>
        <td>public boolean hasOrderedBefore(int userid, int hotelid);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要判断某个用户是否预订过某个酒店</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>判断用户是否预订过某个酒店</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getOrder</center></td>
        <td>语法</td>
        <td>public Order getOrder(int orderid);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据orderId获得对应的order记录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得order记录</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.changeStatus</center></td>
        <td>语法</td>
        <td>public ResponseVO changeStatus(int orderid,String status,int hotelId,String roomType,String startTime,String endTime,int reserveNum);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据orderId更改订单状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更改订单的状态</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.changeCommentStatus</center></td>
        <td>语法</td>
        <td>public void changeCommentStatus(int orderId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据orderId更改是否评价过的状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更改订单的是否评价状态</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getPrice</center></td>
        <td>语法</td>
        <td>public Double getPrice(int orderId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据orderId获取对应的价格</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得价格</td>
    </tr>
    <tr>
        <td rowspan="3"><center>OrderServiceImpl.getUserId</center></td>
        <td>语法</td>
        <td>public Integer getUserId(int orderId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据orderId获取对应的客户Id</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>获得orderId对应的客户Id</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>OrderService.getAllOrders()</td>
        <td colspan="2">获得所有订单信息</td>
    </tr>
    <tr>
        <td>Order.getHotelId()</td>
        <td colspan="2">获得酒店id</td>
    </tr>
    <tr>
        <td>OrderVO.getRoomNum()</td>
        <td colspan="2">获得预订房间数量</td>
    </tr>
    <tr>
        <td>HotelService.getRoomCurNum(Integer hotelId,String roomType)</td>
        <td colspan="2">查看酒店剩余某种房间数量</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败的信息</td>
    </tr>
    <tr>
        <td>OrderVO.setCreateDate(Integer createDate)</td>
        <td colspan="2">设置订单创建日期</td>
    </tr>
    <tr>
        <td>OrderVO.setOrderState(String state)</td>
        <td colspan="2">设置订单状态</td>
    </tr>
    <tr>
        <td>AccountService.getUserInfo(int id)</td>
        <td colspan="2">获取用户个人信息</td>
    </tr>
    <tr>
        <td>OrderVO.setClientName(String clientName)</td>
        <td colspan="2">设置客户名称</td>
    </tr>
    <tr>
        <td>OrderVO.setPhoneNumber(String phoneNumber)</td>
        <td colspan="2">设置客户电话</td>
    </tr>
    <tr>
        <td>OrderMapper.addOrder(Order order)</td>
        <td colspan="2">添加订单</td>
    </tr>
    <tr>
        <td>HotelService.updateRoomInfo(Integer hotelId, String roomType,Integer rooms)</td>
        <td colspan="2">预订酒店修改剩余客房信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功的信息</td>
    </tr>
    <tr>
        <td>BeanUtils.copyProperties(@NotNull Object source, @NotNull Object target)</td>
        <td colspan="2">信息拷贝</td>
    </tr>
    <tr>
        <td>OrderMapper.getAllOrders()</td>
        <td colspan="2">返回全部订单</td>
    </tr>
    <tr>
        <td>OrderMapper.getUserOrders(int userid)</td>
        <td colspan="2">返回某客户的全部订单</td>
    </tr>
    <tr>
        <td>OrderMapper.getOrderByHotelId(int hotelId)</td>
        <td colspan="2">返回某酒店的全部订单</td>
    </tr>
    <tr>
        <td>orderMapper.getOrderById(orderid)</td>
        <td colspan="2">返回orderId对应的订单</td>
    </tr>
    <tr>
        <td>orderVO.setWhetherComment(0);</td>
        <td colspan="2">更改订单是否评价的状态</td>
    </tr>
    <tr>
        <td>curRoomMapper.isExist(int hotelId,String roomType,String day)</td>
        <td colspan="2">判断curRoom表中是否存在对应的记录</td>
    </tr>
    <tr><td>curRoomMapper.selectCurRoomNum(orderVO.getHotelId(),orderVO.getRoomType(),day);</td>
        <td colspan="2">获得curRoom表中对应记录的curRoomNum</td>
    </tr>
    <tr>
        <td>curRoomMapper.updateCurRoomNum(orderVO.getHotelId(),orderVO.getRoomType(),day,orderVO.getRoomNum());</td>
        <td colspan="2">更新curRoom表中对应的记录</td>
    </tr>
</table>
##### 5.3.2.13 AccountServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.registerAccount</center></td>
        <td>语法</td>
        <td>ResponseVO registerAccount(UserVO userVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要注册账号</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加账号</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.login</center></td>
        <td>语法</td>
        <td>User login(UserForm userForm);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户需要登录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>登录成功，将用户信息保存在session中</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.getUserInfo</center></td>
        <td>语法</td>
        <td>User getUserInfo(int id);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取用户个人信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回用户个人信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.updateUserInfo</center></td>
        <td>语法</td>
        <td>ResponseVO updateUserInfo(int id, String password,String username,String phonenumber);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新用户个人信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新用户个人信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.deleteUser</center></td>
        <td>语法</td>
        <td>public ResponseVO deleteUser(int id);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要删除用户</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新删除用户</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.registerMem</center></td>
        <td>语法</td>
        <td>public ResponseVO registerMem(MemRegisterVO memRegisterVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要注册会员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>注册会员</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.increaseMemberPoints</center></td>
        <td>语法</td>
        <td>public ResponseVO increaseMemberPoints(int userId, int amount);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要增加会员积分</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加会员积分</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.decreaseMemberPoints</center></td>
        <td>语法</td>
        <td>public ResponseVO decreaseMemberPoints(int userId, int amount);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要减少会员积分</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>减少会员积分</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.getMemInfo</center></td>
        <td>语法</td>
        <td>public MemInfoVO getMemInfo(int userId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要取得用户会员信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回用户的会员信息</td>
    </tr>
    <tr>
        <td rowspan="3"><center>AccountServiceImpl.updateAvatar</center></td>
        <td>语法</td>
        <td>public ResponseVO updateAvatar(String fileName);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新用户头像</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更新用户头像</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>AccountMapper.createNewAccount(user)</td>
        <td colspan="2">设置用户的email</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败信息</td>
    </tr>
    <tr>
        <td>AccountMapper.getAccountByName(String email)</td>
        <td colspan="2">根据用户名查找账号</td>
    </tr>
    <tr>
        <td>User.getPassword()</td>
        <td colspan="2">返回用户密码</td>
    </tr>
    <tr>
        <td>UserForm.getPassword())</td>
        <td colspan="2">返回用户填写的密码</td>
    </tr>
    <tr>
        <td>UserForm.getEmail()</td>
        <td colspan="2">返回用户填写的email</td>
    </tr>
    <tr>
        <td>AccountMapper.getAccountById(int id)</td>
        <td colspan="2">根据id查找账号</td>
    </tr>
    <tr>
        <td>AccountMapper.updateAccount(@Param("id") int id, @Param("password") String password,@Param("userName") String username, @Param("phoneNumber") String phonenumber)</td>
        <td colspan="2">更新用户信息</td>
    </tr>
    <tr>
        <td>AccountMapper.deleteUser(int id)</td>
        <td colspan="2">删除用户</td>
    </tr>
    <tr>
        <td>OrderMapper.getUserOrders</td>
        <td colspan="2">返回用户的所有订单</td>
    </tr>
    <tr>
        <td>MemberMapper.insert(int member)</td>
        <td colspan="2">插入会员记录</td>
    </tr>
    <tr>
        <td>MemberMapper.getInfo(Integer userId)</td>
        <td colspan="2">根据userId返回会员信息</td>
    </tr>
    <tr>
        <td>MemberMapper.update(Integer memberPoints)</td>
        <td colspan="2">更新积分</td>
    </tr>
</table>


##### 5.3.2.13 MessageServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.getQuesById</center></td>
        <td>语法</td>
        <td>public List List<MessageVO>  getQuesById(int toId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据网站运营人员id获取收到的留言列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回收到的留言列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.getQuesForClientById</center></td>
        <td>语法</td>
        <td>public List<MessageVO> getQuesForClientById(int fromId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据客户id获取已发送的留言列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回已发送的留言列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.getChatById</center></td>
        <td>语法</td>
        <td>public List<MessageVO> getChatById(int toId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据留言id获取聊天内容列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回聊天内容列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.getPrivateAd</center></td>
        <td>语法</td>
        <td>public List<MessageVO> getPrivateAd(int toId)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要根据客户id获取收到的推送消息列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回收到的推送消息列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.getAdSentById</center></td>
        <td>语法</td>
        <td>public List<MessageVO> getAdSentById(int fromId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要网站运营人员id获取发送的推送列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回发送的推送列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.sendMessage</center></td>
        <td>语法</td>
        <td>public ResponseVO sendMessage(SendMessageVO sendMessageVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要发送消息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否发送成功</td>
    </tr>
    <tr>
        <td rowspan="3"><center>MessageServiceImpl.changeMessageStatus</center></td>
        <td>语法</td>
        <td>public ResponseVO changeMessageStatus(int id, String status);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新消息状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>Message.setSendTime(Timestamp sendTime)</td>
        <td colspan="2">设置消息发送时间</td>
    </tr>
    <tr>
        <td>Message.setStatus(String status)</td>
        <td colspan="2">设置消息状态</td>
    </tr>
    <tr>
        <td>Message.setTitle(String title)</td>
        <td colspan="2">设置消息主题</td>
    </tr>
     <tr>
    	<td>Message.setContent(String content)</td>
        <td colspan="2">设置消息内容</td>  
    </tr>
    <tr>
        <td>Message.setFrom(Integer from)</td>
        <td colspan="2">设置消息发送方</td>
    </tr>
    <tr>
        <td>Message.setTo(Integer to)</td>
        <td colspan="2">设置消息接收方</td>
    </tr>
    <tr>
        <td>Message.setType(MessageType type)</td>
        <td colspan="2">设置消息类型</td>
    </tr>
    <tr>
        <td>Message.setRetMsgId(Integer retMsgId)</td>
        <td colspan="2">设置消息所属留言编号</td>
    </tr>
    <tr>
        <td>MessageMapper.getQuesById(int toId)</td>
        <td colspan="2">获取收到的留言列表</td>
    </tr>
    <tr>
    	<td>MessageMapper.getQuesForClientById(int fromId)</td>
        <td colspan="2">获取发送的留言列表</td>
    </tr>
    <tr>
    	<td>MessageMapper.getChatById(int id)</td>
        <td colspan="2">获取留言对应聊天记录</td>
    </tr>
    <tr>
    	<td>MessageMapper.getPrivateAdById(int toId)</td>
        <td colspan="2">获取收到的推送列表</td>
    </tr>
    <tr>
        <td>MessageMapper.getAdSentById(int fromId)</td>
        <td colspan="2">返回发送的推送列表</td>
    </tr>
    <tr>
        <td>MessageMapper.insertMessage(Message message)</td>
        <td colspan="2">添加消息记录</td>
    </tr>
    <tr>
        <td>MessageMapper.changeMessageStatus(int id, String status)</td>
        <td colspan="2">更新消息状态</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败信息</td>
    </tr>
    <tr>
        <td>AccountMapper.getUsernameById(int id)</td>
        <td colspan="2">返回用户名</td>
    </tr>
</table>


##### 5.3.2.14 BroadcastServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>BroadcastServiceImpl.getBroadcastList</center></td>
        <td>语法</td>
        <td>public List<BroadcastVO> getBroadcastList();</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取网站公告列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回网站公告列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>BroadcastServiceImpl.changeBroadcastStatus</center></td>
        <td>语法</td>
        <td>public ResponseVO changeBroadcastStatus(int id, String status);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新网站公告状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td rowspan="3"><center>BroadcastServiceImpl.updatePriority</center></td>
        <td>语法</td>
        <td>public ResponseVO updatePriority(int id, int priority);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要更新网站公告优先级</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td rowspan="3"><center>BroadcastServiceImpl.sendBroadcast</center></td>
        <td>语法</td>
        <td>public ResponseVO sendBroadcast(SendBroadcastVO sendBroadcastVO)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要添加网站公告</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否添加成功</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>Broadcast.setSendTime(Timestamp sendTime)</td>
        <td colspan="2">设置网站公告添加时间</td>
    </tr>
    <tr>
        <td>Broadcast.setCreatedId(Integer createdId)</td>
        <td colspan="2">设置网站公告状态</td>
    </tr>
    <tr>
        <td>Broadcast.setTitle(String title)</td>
        <td colspan="2">设置网站公告主题</td>
    </tr>
     <tr>
    	<td>Broadcast.setContent(String content)</td>
        <td colspan="2">设置网站公告内容</td>  
    </tr>
    <tr>
        <td>Broadcast.setPriority(Integer priority)</td>
        <td colspan="2">设置网站公告优先级</td>
    </tr>
    <tr>
        <td>Broadcast.setStatus(String status)</td>
        <td colspan="2">设置网站公告状态</td>
    </tr>
    <tr>
        <td>BroadcastMapper.getBroadcastList</td>
        <td colspan="2">获取网站公告列表</td>
    </tr>
    <tr>
    	<td>BroadcastMapper.changeBroadcastStatus(int id, String status)</td>
        <td colspan="2">更新网站公告状态</td>
    </tr>
    <tr>
    	<td>BroadcastMapper.updatePriority(int id, int priority)</td>
        <td colspan="2">更新网站公告优先级</td>
    </tr>
    <tr>
    	<td>BroadcastMapper.insertBroadcast(Broadcast broadcast)</td>
        <td colspan="2">添加网站公告</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败信息</td>
    </tr>
    <tr>
        <td>AccountMapper.getUsernameById(int id)</td>
        <td colspan="2">返回用户名</td>
    </tr>
</table>


##### 5.3.2.15 CreditServiceImpl

<table>
    <tr>
        <td colspan="3"><center>提供的服务（供接口）</center></td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.initCredit</center></td>
        <td>语法</td>
        <td>public int initCredit(int userId, double credit);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要初始化用户信用值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否初始化成功</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.defaultUpdateCredit</center></td>
        <td>语法</td>
        <td>public ResponseVO defaultUpdateCredit(DefaultUpdateCreditVO defaultUpdateCreditVO, DefaultCreditUpdateStrategy defaultCreditUpdateStrategy);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要采用系统默认方式更新信用值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.manualUpdateCredit</center></td>
        <td>语法</td>
        <td>public ResponseVO manualUpdateCredit(ManualUpdateCreditVO manualUpdateCreditVO);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要采用手动方式更新信用值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否更新成功</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.getCreditRecords</center></td>
        <td>语法</td>
        <td>public List<CreditRecordVO> getCreditRecords()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取信用变更记录列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回信用变更记录列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.getUserCreditRecords</center></td>
        <td>语法</td>
        <td>public List<CreditRecordVO> getUserCreditRecords(int userId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取用户信用变更记录列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回用户信用变更记录列表</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.getUserCredit</center></td>
        <td>语法</td>
        <td>public Double getUserCredit(int userId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取用户信用值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回用户信用值</td>
    </tr>
    <tr>
        <td rowspan="3"><center>CreditServiceImpl.cancelCreditRecord</center></td>
        <td>语法</td>
        <td>public ResponseVO cancelCreditRecord(int id);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要撤销信用变更</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回是否撤销成功</td>
    </tr>
    <td rowspan="3"><center>CreditServiceImpl.getCreditCurve</center></td>
        <td>语法</td>
        <td>public CreditCurveVO getCreditCurve(int userId);</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>需要获取信用变更曲线</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回信用变更曲线</td>
    </tr>
    <tr>
        <td colspan="3"><center>需要的服务（需接口）</center></td>
    </tr>
    <tr>
        <td><center>服务名</center></td>
        <td colspan="2"><center>服务</center></td>
    </tr>
    <tr>
        <td>CreditRecord.setUserId(Integer userId)</td>
        <td colspan="2">设置信用记录所属用户id</td>
    </tr>
    <tr>
        <td>CreditRecord.setCredit(Double credit)</td>
        <td colspan="2">设置信用记录更新后信用值</td>
    </tr>
    <tr>
        <td>CreditRecord.setCreateTime(Timestamp createTime)</td>
        <td colspan="2">设置信用记录创建时间</td>
    </tr>
     <tr>
    	<td>CreditRecord.setUpdateTime(Timestamp updateTime)</td>
        <td colspan="2">设置信用记录最后一次更新时间</td>  
    </tr>
    <tr>
        <td>CreditRecord.setStatus(String status)</td>
        <td colspan="2">设置信用记录状态</td>
    </tr>
    <tr>
        <td>CreditRecord.setDesc(String desc)</td>
        <td colspan="2">设置信用记录变更说明</td>
    </tr>
    <tr>
        <td>CreditRecord.setUser(User user)</td>
        <td colspan="2">设置信用记录所属用户信息</td>
    </tr>
    <tr>
        <td>CreditMapper.getUserCreditRecords(int userId);</td>
        <td colspan="2">获取用户信用变更记录</td>
    </tr>
    <tr>
    	<td>CreditMapper.getCreditRecords()</td>
        <td colspan="2">获取信用变更记录列表</td>
    </tr>
    <tr>
    	<td>CreditMapper.getUserCredit(int userId)</td>
        <td colspan="2">获取用户信用值</td>
    </tr>
    <tr>
    	<td>CreditMapper.cancelCreditRecord(int id)</td>
        <td colspan="2">撤销信用变更</td>
    </tr>
    <tr>
        <td>CreditMapper.insertCreditRecord(CreditRecord creditRecord)</td>
        <td colspan="2">添加信用变更记录</td>
    </tr>
    <tr>
        <td>DefaultDefaultCreditDecreImpl.getResult(Double price, Double credit)</td>
        <td colspan="2">返回系统默认增加后信用值</td>
    </tr>
    <tr>
        <td>DefaultDefaultCreditIncreImpl.getResult(Double price, Double credit)</td>
        <td colspan="2">返回系统默认减少后信用值</td>
    </tr>
    <tr>
        <td>ResponseVO.buildSuccess(Object content)</td>
        <td colspan="2">返回构建成功信息</td>
    </tr>
    <tr>
        <td>ResponseVO.buildFailure(String message)</td>
        <td colspan="2">返回构建失败信息</td>
    </tr>
</table>




### 5.4 数据层分解

数据层主要给业务逻辑层提供数据访问服务，包括对于持久化数据的增、删、改、查。Admin业务逻辑需要需要的服务由AdminMapper接口提供；Coupon业务逻辑需要需要的服务由CouponMapper接口提供；Credit业务逻辑需要需要的服务由CreditMapper接口提供；Comment业务逻辑需要需要的服务由CommentMapper接口提供；Hotel业务逻辑需要需要的服务由HotelMapper接口提供；MyTag业务逻辑需要需要的服务由MyTagMapper接口提供；Room业务逻辑需要需要的服务由RoomMapper接口提供；Broadcast业务逻辑需要需要的服务由BroadcastMapper接口提供；Message业务逻辑需要需要的服务由MessageMapper接口提供；Order业务逻辑需要需要的服务由OrderMapper接口提供；Account业务逻辑需要需要的服务由AccountMapper接口提供；Member业务逻辑需要需要的服务由MemberMapper接口提供。本项目持久化数据的保存方式为数据库，所示抽象了数据服务。数据层模块的描述具体如图所示。

![](https://supernatural.oss-cn-beijing.aliyuncs.com/1.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/2.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/3.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/4.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/5.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/6.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/7.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/8.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/9.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/10.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/11.png)

![](https://supernatural.oss-cn-beijing.aliyuncs.com/12.png)



#### 5.4.1 职责

|        模块        | 职责                                                        |
| :----------------: | ----------------------------------------------------------- |
|    AdminMapper     | 持久化数据库的接口，提供增、查服务                          |
|    CouponMapper    | 持久化数据库的接口，提供增、查、删服务                      |
|    HotelMapper     | 持久化数据库的接口，提供增、删、改、查服务                  |
|     RoomMapper     | 持久化数据库的接口，提供增、查、改服务                      |
|    OrderMapper     | 持久化数据库的接口，提供增、查、改服务                      |
|   AccountMapper    | 持久化数据库的接口，提供增、改、查、删服务                  |
|   dataImpl.admin   | 基于Mysql数据库的持久化数据库的接口，提供增、查服务         |
|  dataImpl.coupon   | 基于Mysql数据库的持久化数据库的接口，提供增、查、删服务     |
|   dataImpl.hotel   | 基于Mysql数据库的持久化数据库的接口，提供增、删、改、查服务 |
|   dataImpl.order   | 基于Mysql数据库的持久化数据库的接口，提供增、查、改服务     |
|  dataImpl.account  | 基于Mysql数据库的持久化数据库的接口，提供增、改、查、删服务 |
|    CreditMapper    | 持久化数据库的接口，提供增、改、查服务                      |
|  dataImpl.credit   | 基于Mysql数据库的持久化数据库的接口，提供增、改、查服务     |
|   CommentMapper    | 持久化数据库的接口，提供增、改、查服务                      |
|  dataImpl.comment  | 基于Mysql数据库的持久化数据库的接口，提供增、改、查服务     |
|    MyTagMapper     | 持久化数据库的接口，提供增、删、查服务                      |
|   dataImpl.myTag   | 基于Mysql数据库的持久化数据库的接口，提供增、删、查服务     |
|   dataImpl.room    | 基于Mysql数据库的持久化数据库的接口，提供增、改、查服务     |
|  BroadcastMapper   | 持久化数据库的接口，提供增、查、改服务                      |
| dataImpl.broadcast | 基于Mysql数据库的持久化数据库的接口，提供增、改、查服务     |
|   MessageMapper    | 持久化数据库的接口，提供增、查、改服务                      |
|  dataImpl.message  | 基于Mysql数据库的持久化数据库的接口，提供增、改、查服务     |
|    MemberMapper    | 持久化数据库的接口，提供增、查、改服务                      |
|  dataImpl.member   | 基于Mysql数据库的持久化数据库的接口，提供增、改、查服务     |


#### 5.4.2 接口规范

|                 方法                  | 语法                                                         | 前置条件                      | 后置条件                                |
| :-----------------------------------: | ------------------------------------------------------------ | ----------------------------- | --------------------------------------- |
|        AdminMapper.addOperator        | int addOperator(User user);                                  | 同样的po在数据库中不存在      | 在数据库中增加一个po记录                |
|        AdminMapper.addManager         | int addManager(User user);                                   | 同样的po在数据库中不存在      | 在数据库中增加一个po记录                |
|      AdminMapper.getAllManagers       | List<User> getAllManagers();                                 | 无                            | 返回所有的User结果                      |
|       AdminMapper.getAllClients       | List<User> getAllClients();                                  | 无                            | 返回所有的User结果                      |
|      AdminMapper.getAllOperators      | List<User> getAllOperators();                                | 无                            | 返回所有的User结果                      |
|       CouponMapper.insertCoupon       | int insertCoupon(Coupon coupon);                             | 同样的po在数据库中不存在      | 在数据库中增加一个po记录                |
|     CouponMapper.selectByHotelId      | List<Coupon> selectByHotelId(Integer hotelId);               | 无                            | 按ID进行查找返回相应的Coupon列表        |
|       CouponMapper.deleteCoupon       | int deleteCoupon(Integer couponId);                          | 对应的po在数据库中存在        | 在数据库中删除一个po记录                |
|   CreditMapper.getUserCreditRecords   | List<CreditRecord> getUserCreditRecords(@Param("userId") int userId); | 无                            | 返回所有符合条件的信用记录结果          |
|     CreditMapper.getCreditRecords     | List<CreditRecord> getCreditRecords();                       | 无                            | 返回所有符合条件的信用记录结果          |
|      CreditMapper.getUserCredit       | Double getUserCredit(@Param("userId") int userId);           | 无                            | 返回所有符合条件的信用记录结果          |
|    CreditMapper.cancelCreditRecord    | int cancelCreditRecord(@Param("id") int id);                 | 对应的记录在数据库中存在      | 在数据库中删除一个信用记录              |
|    CreditMapper.insertCreditRecord    | int insertCreditRecord(CreditRecord creditRecord);           | 同样的po在数据库中不存在      | 在数据库中增加一个信用记录              |
|       CommentMapper.addComment        | int addComment(Comment comment);                             | 同样的po在数据库中不存在      | 在数据库中增加一个记录                  |
|   CommentMapper.getCommentByHotelId   | List<Comment> getCommentByHotelId(@Param("hotelId") Integer hotelId); | 无                            | 返回所有符合条件的记录结果              |
|       CommentMapper.updateReply       | int updateReply(@Param("commentId") int commentId,@Param("reply") String reply); | 对应的记录在数据库中存在      | 在数据库中更新一个记录                  |
|        HotelMapper.insertHotel        | int insertHotel(Hotel hotel);                                | 同样的po在数据中中不存在      | 在数据库中增加一个po记录                |
|      HotelMapper.selectAllHotel       | List<HotelVO> selectAllHotel();                              | 无                            | 返回所有的Hotel结果                     |
|        HotelMapper.selectById         | HotelVO selectById(@Param("id") Integer id);                 | 无                            | 按id返回HotelVO结果                     |
|       HotelMapper.setManagerId        | int setManagerId(@Param("managerId")Integer managerId,@Param("id") Integer id); | 对应的hotel记录在数据库中存在 | 更新数据库中对应的hotel记录             |
|          HotelMapper.delete           | int delete(@Param("id") Integer id);                         | 对应的记录在数据库中存在      | 在数据库中删除一个记录                  |
|          HotelMapper.update           | int update(@Param("id") int id, @Param("address") String address,@Param("phoneNum") String phoneNum); | 对应的记录在数据库中存在      | 在数据库中更新一个记录                  |
|         HotelMapper.updatePic         | int updatePic(@Param("id") int id, @Param("pic_1") String pic_1, @Param("pic_2") String pic_2, @Param("pic_3") String pic_3, @Param("pic_4") String pic_4, @Param("pic_5") String pic_5, @Param("pic_6") String pic_6, @Param("pic_7") String pic_7, @Param("pic_8") String pic_8); | 对应的记录在数据库中存在      | 在数据库中更新一个记录                  |
|     MyTagMapper.getTagsByHotelId      | List<MyTag> getTagsByHotelId(int hotel);                     | 无                            | 返回所有的查询结果                      |
|        MyTagMapper.deleteById         | int deleteById(int id);                                      | 对应的记录在数据库中存在      | 在数据库中删除一个记录                  |
|          MyTagMapper.insert           | int insert(MyTag myTag);                                     | 无                            | 在数据库中增加一个po记录                |
| MyTagMapper.selectByHotelIdAndTagName | List<MyTag> selectByHotelIdAndTagName(String tagName,int hotelId); | 无                            | 返回所有的查询结果                      |
|       RoomMapper.updateRoomInfo       | int updateRoomInfo(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType,@Param("curNum") Integer curNum); | 在数据库中存在同样id的po      | 更新一个po                              |
|         RoomMapper.insertRoom         | int insertRoom(HotelRoom hotelRoom);                         | 同样的po在数据库中不存在      | 在数据库中增加一个po记录                |
|    RoomMapper.selectRoomsByHotelId    | List<HotelRoom> selectRoomsByHotelId(@Param("hotelId") Integer hotelId); | 无                            | 返回对应的HotelRoom结果                 |
|       RoomMapper.getRoomCurNum        | int getRoomCurNum(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType); | 无                            | 按hotelId、roomType返回对应的RoomCurNum |
|         RoomMapper.updateRoom         | int updateRoom(@Param("hotelId") Integer hotelId,@Param("roomType") String roomType,               @Param("curNum") Integer curNum,@Param("total") Integer total,@Param("price") Double price); | 在数据库中存在对应po          | 更新po                                  |
|   BroadcastMapper.getBroadcastList    | List<Broadcast> getBroadcastList();                          | 无                            | 返回对应的Broadcast结果                 |
| BroadcastMapper.changeBroadcastStatus | void changeBroadcastStatus(@Param("id") int id, @Param("status") String status); | 在数据库中存在对应po          | 更新po                                  |
|    BroadcastMapper.updatePriority     | void updatePriority(@Param("id") int id, @Param("priority") int priority); | 在数据库中存在对应po          | 更新po                                  |
|    BroadcastMapper.insertBroadcast    | Integer insertBroadcast(Broadcast broadcast);                | 无                            | 在数据库中增加一个po记录                |
|       MessageMapper.getQuesById       | List<Message> getQuesById(@Param("toId") int toId);          | 无                            | 返回对应的Message结果                   |
|  MessageMapper.getQuesForClientById   | List<Message> getQuesForClientById(@Param("fromId") int fromId); | 无                            | 返回对应的Message结果                   |
|       MessageMapper.getChatById       | List<Message> getChatById(@Param("id") int id);              | 无                            | 返回对应的Message结果                   |
|    MessageMapper.getPrivateAdById     | List<Message> getPrivateAdById(@Param("toId") int toId);     | 无                            | 返回对应的Message结果                   |
|      MessageMapper.getAdSentById      | List<Message> getAdSentById(@Param("fromId") int fromId);    | 无                            | 返回对应的Message结果                   |
|       MessageMapper.getGroupMsg       | List<Message> getGroupMsg();                                 | 无                            | 返回对应的Message结果                   |
|      MessageMapper.insertMessage      | Integer insertMessage(Message message);                      | 同样的po在数据库中不存在      | 在数据库中增加一个po记录                |
|   MessageMapper.changeMessageStatus   | void changeMessageStatus(@Param("id") int id, @Param("status") String status); | 同样的po在数据库中存在        | 在数据库中更新一个po记录                |
|         OrderMapper.addOrder          | int addOrder(Order order);                                   | 同样po在数据库中不存在        | 在数据库中增加一个po记录                |
|       OrderMapper.getAllOrders        | List<Order> getAllOrders();                                  | 无                            | 返回所有的Oder记录                      |
|       OrderMapper.getUserOrders       | List<Order> getUserOrders(@Param("userid") int userid);      | 无                            | 按userid返回对应的Order记录             |
|        OrderMapper.annulOrder         | int annulOrder(@Param("orderid") int orderid);               | 无                            | 按orderid返回对应的记录                 |
|       OrderMapper.getOrderById        | Order getOrderById(@Param("orderid") int orderid);           | 无                            | 按oderid返回对应的Order记录             |
|       OrderMapper.changeStatus        | int changeStatus(@Param("orderid") int orderid,@Param("status") String status); | 同样的po在数据库中存在        | 在数据库中更新一个po记录                |
|       OrderMapper.getPriceById        | Double getPriceById(@Param("orderid") int orderid);          | 无                            | 返回对应的Order记录                     |
|         OrderMapper.getUserId         | Integer getUserId(@Param("orderid") int orderid);            | 无                            | 返回对应的Order记录                     |
|          OrderMapper.setCrid          | Integer setCrid(@Param("orderid") int orderid, @Param("crid") int crid); | 同样的po在数据库中存在        | 在数据库中更新一个po记录                |
|    OrderMapper.changeCommentStatus    | void changeCommentStatus(@Param("orderId") int orderId);     | 同样的po在数据库中存在        | 在数据库中更新一个po记录                |
|    AccountMapper.createNewAccount     | int createNewAccount(User user);                             | 相同的User在数据库中不存在    | 在数据库中增加一个po记录                |
|    AccountMapper.getAccountByName     | User getAccountByName(@Param("email") String email);         | 无                            | 按email进行查找返回对应的User结果       |
|     AccountMapper.getAccountById      | User getAccountById(@Param("id") int id);                    | 无                            | 按id进行查找返回相应的User结果          |
|      AccountMapper.updateAccount      | int updateAccount(@Param("id") int id, @Param("password") String password,@Param("userName") String username, @Param("phoneNumber") String phonenumber); | 在数据库中存在相同id的po      | 更新一个po                              |
|       AccountMapper.deleteUser        | int deleteUser(@Param("id") int id);                         | 在数据库中存在相同id的po      | 更新一个po                              |
|        AccountMapper.searchOO         | List<User> searchOO(@Param("keyword") String keyword);       | 无                            | 返回相应的User结果                      |
|      AccountMapper.searchClient       | List<User> searchClient(@Param("keyword") String keyword);   | 无                            | 返回相应的User结果                      |
|     AccountMapper.getUsernameById     | String getUsernameById(@Param("id") int id);                 | 无                            | 返回相应的User结果                      |
|          MemberMapper.insert          | int insert(Member member);                                   | 同样的po在数据库中不存在      | 在数据库中增加一个po记录                |
|         MemberMapper.getInfo          | Member getInfo(@Param("userId")int userId);                  | 无                            | 返回相应的User结果                      |
|          MemberMapper.update          | int update(@Param("memberPoints") double memberPoints,@Param("userId") int userId); | 同样的po在数据库中存在        | 更新一个po                              |




### 6. 信息视角

- 描述数据持久化对象(PO)

  - 属性及其定义

    1. User: 用户ID，电子邮箱，密码，用户名，手机号码，信用值，客户类型，会员类型，生日，头像，创建日期

    ![](https://supernatural.oss-cn-beijing.aliyuncs.com/User.png)

    2. Order: 订单ID，用户ID，酒店ID，酒店名称，入住时间，退房时间，房间类型，房间数量，人数，是否带有儿童，订单创建日期，价格，客户名，手机号码，订单状态，取消原因，客户名，信用修改条目号，是否已评论

    ![](https://supernatural.oss-cn-beijing.aliyuncs.com/Order.png)

    3. HotelRoom: 房间ID，房间类型，酒店ID，价格，剩余房间数，房间总数

    <img src="https://supernatural.oss-cn-beijing.aliyuncs.com/hotelroom定义.jpg" style="zoom:50%;" />

    4. Hotel: 酒店ID，酒店名称，酒店地址，商圈，酒店星级，评分，描述，联系电话，酒店管理员ID，酒店图片1，酒店图片2，酒店图片3，酒店图片4，酒店图片5，酒店图片6，酒店图片7，酒店图片8

    ![](https://supernatural.oss-cn-beijing.aliyuncs.com/Hotel.png)

    5. Coupon:优惠券ID，描述，酒店ID，优惠券类型，优惠券名称，使用门槛，折扣，使用时间，失效时间，状态

    <img src="https://supernatural.oss-cn-beijing.aliyuncs.com/coupon定义.jpg" style="zoom:50%;" />

    6. Broadcast: 广播id，创建id，创建时间，标题，内容，状态，优先级
    
       ![](https://supernatural.oss-cn-beijing.aliyuncs.com/Broadcast.png)
    
    7. Comment: 评论id，用户id，酒店id，订单id，评分，评价内容，头像，用户名，回复
    
       ![](https://supernatural.oss-cn-beijing.aliyuncs.com/Comment.png)
    
       8. CreditRecord: 记录id，用户id，信用值，创建日期，更新日期，状态，描述
    
          ![](https://supernatural.oss-cn-beijing.aliyuncs.com/CreditRecord.png)
    
       9. Member：用户id，积分点数，生日
    
          ![](https://supernatural.oss-cn-beijing.aliyuncs.com/Member.png)
    
         10. Message：消息id，发送时间，状态，标题，内容，发信，收信，消息类型，返回消息id
    
             ![](https://supernatural.oss-cn-beijing.aliyuncs.com/Message.png)
    
         11. MyTag：标签id，名称，酒店id
    
             ![](https://supernatural.oss-cn-beijing.aliyuncs.com/MyTag.png)
  - 类型
  
    1. User​
    
       id: Integer,email: String,password: String,userName: String,phoneNumber: String,credit: double,userType: UserType, membership:int, bithday:String, avatar_url:String, createYime:LocalDate
    
    2. Order
    
       id: Integer,useId: Integer,hotelId: Integer,hotelName: String,checkInDate: String,checkOutDate: String,roomType: String,roomNum: Integer,peopleNum: Integer,havaChild: boolean,createDate: String,price: double,clientName: String,phoneNumber: String,oderState: String, cancelReason:String, residentName: String, crid:Integer, whetherComment:Integer
    
    3. HotelRoom
    
       id: Integer,roomType: RoomType,hotelId: Integer,price: double,curNum: int,total: int
    
    4. Hotel
    
       id: Integer,hotelName: String,address: String,bizRegion: BizRegion,hotelStar: HotelStar,rate: Double,description: String,phoneNum: String, pic_1:String, pic_2:String, pic_3:String, pic_4:String, pic_5:String, pic_6:String, pic_7:String, pic_8:String
    
    5. Coupon
    
       id: int,description: String,hotelId: Integer,couponType: Integer,couponName: String,tagetMoney: double,discount: double,discountMoney: double,startTime: LocalDateTime,endTime: LocalDateTime,status: Integer
       
    6. Broadcast
    
       id:Integer, createdId:Integer, createdTime:Timestamp, title: String, content:String, status:String, priority:Integer
    
    7. Comment
    
       id: Integer, userId: Integer, hotelId: Integer, orderId: Integer, commentValue: Integer, commentContent: String, avatar: String, userName: String, reply: String
    
    8. CreditRecord
    
       rid: Integer, userId:Integer, credit: Double, createTime:Timestamp, updateTime:Timestamp, status:String, desc:String
    
    9. Member
    
       userId:Integer, memberPoints:Integer, birthday:LocalDate
    
    10. Message
    
        id:Integer, sendTime:Timestamp, status:String, title:String, content:String,from:Integer, to: Integer, type:MessageType,retMsgId:Integer
    
    11. MyTag
    
        id:Integer, tagName:String, hotelId:Integer